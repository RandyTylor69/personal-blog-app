{"ast":null,"code":"import{Link}from\"react-router-dom\";import React from\"react\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Header(props){React.useEffect(()=>{async function checkLogin(){const res=await fetch(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/profile\"),{credentials:\"include\"});const data=await res.json();if(!res.ok){alert(data.error);return;}// successful log-in\nprops.setUsername(data.username);// re-renders the entire app\n}checkLogin();},[]);async function logout(){const res=await fetch(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/logout\"),{method:\"POST\",credentials:\"include\"});const data=await res.json();if(res.ok)alert(data.message);props.setUsername(null);}return/*#__PURE__*/_jsx(\"header\",{className:\"web-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-left\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Blog\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"header-right\",children:props.username?/*#__PURE__*/// if logged in\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/create\",children:\"Write New Post\"}),/*#__PURE__*/_jsx(\"a\",{onClick:logout,children:\"Log out\"})]}):/*#__PURE__*/// if not logged in\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign Up\"})]})})]})});}","map":{"version":3,"names":["Link","React","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Header","props","useEffect","checkLogin","res","fetch","concat","process","env","REACT_APP_SERVER_URL","credentials","data","json","ok","alert","error","setUsername","username","logout","method","message","className","children","to","onClick"],"sources":["C:/UWO/Summer-Projects/Backend-as-well/blog-app/frontend/src/components/Header.jsx"],"sourcesContent":["import { Link } from \"react-router-dom\";\r\nimport React from \"react\";\r\n\r\nexport default function Header(props) {\r\n\r\n  React.useEffect(() => {\r\n    async function checkLogin() {\r\n      const res = await fetch(`${process.env.REACT_APP_SERVER_URL}/profile`, {\r\n        credentials: \"include\",\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) {\r\n        alert(data.error);\r\n        return;\r\n      }\r\n      // successful log-in\r\n      props.setUsername(data.username) // re-renders the entire app\r\n    }\r\n    checkLogin();\r\n  }, []);\r\n  \r\n  async function logout(){\r\n    const res = await fetch(`${process.env.REACT_APP_SERVER_URL}/logout`, {\r\n      method: \"POST\",\r\n      credentials: \"include\"\r\n    })\r\n    const data = await res.json()\r\n    if (res.ok) alert(data.message)\r\n    props.setUsername(null)\r\n  }\r\n\r\n  return (\r\n    <header className=\"web-header\">\r\n      <div className=\"header-container\">\r\n        <div className=\"header-left\">\r\n          <Link to={\"/\"}>\r\n            <h1>Blog</h1>\r\n          </Link>\r\n        </div>\r\n        <div className=\"header-right\">\r\n          {props.username ? (\r\n            // if logged in\r\n            <>\r\n              <Link to={\"/create\"}>\r\n                Write New Post\r\n              </Link>\r\n              <a onClick={logout}>Log out</a>\r\n            </>\r\n          ) : (\r\n            // if not logged in\r\n            <>\r\n              <Link to={\"/login\"}>\r\n                Login\r\n              </Link>\r\n              <Link to={\"/signup\"}>\r\n               Sign Up\r\n              </Link>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"mappings":"AAAA,OAASA,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,cAAe,SAAS,CAAAC,MAAMA,CAACC,KAAK,CAAE,CAEpCR,KAAK,CAACS,SAAS,CAAC,IAAM,CACpB,cAAe,CAAAC,UAAUA,CAAA,CAAG,CAC1B,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,oBAAoB,aAAY,CACrEC,WAAW,CAAE,SACf,CAAC,CAAC,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,GAAG,CAACQ,IAAI,CAAC,CAAC,CAC7B,GAAI,CAACR,GAAG,CAACS,EAAE,CAAE,CACXC,KAAK,CAACH,IAAI,CAACI,KAAK,CAAC,CACjB,OACF,CACA;AACAd,KAAK,CAACe,WAAW,CAACL,IAAI,CAACM,QAAQ,CAAC,CAAC;AACnC,CACAd,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,cAAe,CAAAe,MAAMA,CAAA,CAAE,CACrB,KAAM,CAAAd,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,oBAAoB,YAAW,CACpEU,MAAM,CAAE,MAAM,CACdT,WAAW,CAAE,SACf,CAAC,CAAC,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,GAAG,CAACQ,IAAI,CAAC,CAAC,CAC7B,GAAIR,GAAG,CAACS,EAAE,CAAEC,KAAK,CAACH,IAAI,CAACS,OAAO,CAAC,CAC/BnB,KAAK,CAACe,WAAW,CAAC,IAAI,CAAC,CACzB,CAEA,mBACErB,IAAA,WAAQ0B,SAAS,CAAC,YAAY,CAAAC,QAAA,cAC5BvB,KAAA,QAAKsB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B3B,IAAA,QAAK0B,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1B3B,IAAA,CAACH,IAAI,EAAC+B,EAAE,CAAE,GAAI,CAAAD,QAAA,cACZ3B,IAAA,OAAA2B,QAAA,CAAI,MAAI,CAAI,CAAC,CACT,CAAC,CACJ,CAAC,cACN3B,IAAA,QAAK0B,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BrB,KAAK,CAACgB,QAAQ,cACb;AACAlB,KAAA,CAAAF,SAAA,EAAAyB,QAAA,eACE3B,IAAA,CAACH,IAAI,EAAC+B,EAAE,CAAE,SAAU,CAAAD,QAAA,CAAC,gBAErB,CAAM,CAAC,cACP3B,IAAA,MAAG6B,OAAO,CAAEN,MAAO,CAAAI,QAAA,CAAC,SAAO,CAAG,CAAC,EAC/B,CAAC,cAEH;AACAvB,KAAA,CAAAF,SAAA,EAAAyB,QAAA,eACE3B,IAAA,CAACH,IAAI,EAAC+B,EAAE,CAAE,QAAS,CAAAD,QAAA,CAAC,OAEpB,CAAM,CAAC,cACP3B,IAAA,CAACH,IAAI,EAAC+B,EAAE,CAAE,SAAU,CAAAD,QAAA,CAAC,SAErB,CAAM,CAAC,EACP,CACH,CACE,CAAC,EACH,CAAC,CACA,CAAC,CAEb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}